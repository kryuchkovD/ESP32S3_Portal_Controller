#pragma once

#include "esp_camera.h"

#ifdef __cplusplus
extern "C" {
#endif

// =====================
// ИНИЦИАЛИЗАЦИЯ
// =====================

// Инициализация камеры (сенсор, буферы, формат, пины)
bool initCamera();

// Инициализация Wi-Fi (блокируется до подключения)
bool initWiFi(const char* ssid, const char* password);

// Запуск HTTP-сервера камеры
// Поднимает:
//   /          → HTML панель
//   /stream    → MJPEG stream
//   /capture   → одиночный кадр
//   /control   → управление параметрами
//   /status    → статус камеры
void startCameraServer();

// =====================
// ЗАХВАТ ИЗОБРАЖЕНИЯ
// =====================

// Захват одиночного кадра с камеры
// НЕ влияет на стрим
// Возвращает указатель на camera_fb_t
// Освобождение памяти ОБЯЗАТЕЛЬНО через:
//   esp_camera_fb_return(fb);
camera_fb_t* capturePhoto();

// =====================
// ВСПОМОГАТЕЛЬНОЕ
// =====================

// Инициализация LED-вспышки (если поддерживается платой)

#ifdef __cplusplus
}
#endif
